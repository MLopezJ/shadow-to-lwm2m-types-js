import coioteShadow from "./input/shadow.json";
import { main } from "./index";
describe("new implementation", () => {
  it("should transform coiote shadow", async () => {
    const expected = {
      "4:1.3@1.1": {
        "0": 6,
        "1": ["6", "7"],
        "2": -96,
        "3": 0,
        "4": ["10.160.225.39"],
        "7": ["ibasis.iot"],
        "8": 21627653,
        "9": 1,
        "10": 242,
        "11": 0,
        "12": 30401,
      },
      "10256": [
        { "0": 247, "1": 0, "2": 6400, "3": -96, "4": -12, "5": 0 },
        { "0": 425, "1": 0, "2": 300, "3": -115, "4": -12, "5": 23 },
        { "0": 195, "1": 0, "2": 300, "3": -119, "4": -16, "5": 23 },
      ],
      "3:1.2@1.1": {
        "0": "Nordic Semiconductor ASA",
        "1": "thingy91_nrf9160",
        "2": "351358815340515",
        "3": "0.0.0-development",
        "7": ["4113"],
        "11": ["0"],
        "13": 2022,
        "16": "U",
        "18": "nRF9160_SICA",
        "19": "mfw_nrf9160_1.3.2",
      },
      "5:1.1@1.1": { "3": 0, "5": 1, "9": 2 },
      "3304:1.1": [
        {
          "5518": 2022,
          "5601": 31.064,
          "5602": 31.064,
          "5603": 0,
          "5604": 100,
          "5700": 28.927,
          "5701": "%",
        },
      ],
      "6": { "0": 0, "1": 0, "2": 0, "3": 0, "5": 1970, "6": 0 },
      "1:1.2@1.2": [
        {
          "0": 101,
          "1": 43200,
          "3": 0,
          "5": 86400,
          "6": 0,
          "7": "U",
          "23": 0,
        },
      ],
      "3323:1.1": [
        {
          "5518": 2022,
          "5601": 98.236,
          "5602": 98.236,
          "5603": 30,
          "5604": 110,
          "5700": 98.226,
          "5701": "kPa",
        },
      ],
      "3347:1.1": [
        { "5500": 0, "5501": 0, "5518": 1970, "5750": "Push button 1" },
      ],
      "3303:1.1": [
        {
          "5518": 2022,
          "5601": 23.51,
          "5602": 23.51,
          "5603": -40,
          "5604": 85,
          "5700": 24.57,
          "5701": "Celsius degrees",
        },
      ],
    };
    expect(await main(coioteShadow)).toStrictEqual(expected);
  });
});
